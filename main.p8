pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
#include nineslice.lua
#include rich_text.lua
#include text_crawl.lua
#include screen_transition.lua
#include dialogue.lua

state = 0

dialogue = dialogue_new(
  [[
@page
@title <c6>NARRATOR<r>
@body
Body text goes here. It can be pretty long, but
it will wrap properly within the dialogue box.
@body
@option Continue
@option Skip Next Page
@option End Dialogue
@callback increment_state
@screen_transition

@page
@title <c6>NARRATOR<r>
@body
There can be multiple pages in a dialogue.
@body
@option Continue

@page
@title <c6>NARRATOR<r>
@body
Callbacks can modify the dialogue flow.
@body
@option Continue
]],
  {
    increment_state = function(index)
      state += 1
      return index == 2 and { page = 3 }
          or index == 3 and { result = "ended early" }
    end
  }
)



result = nil
dialogue:load()

function _update()
  if not result then
    result = dialogue:update()
  end
end

function _draw()
  cls(2)
  if result then
    print("You selected: " .. result)
    return
  end
  dialogue:draw()
  print("S" .. state, 90, 100, 7)
end

__gfx__
00000000007777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000071111111111117000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700711111111111111700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000711111111111111700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000711111111111111700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700711111111111111700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000711111111111111700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000711111111111111700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000711111111111111700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00060000711111111111111700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777770711111111111111700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777000711111111111111700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07776000711111111111111700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000711111111111111700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000071111111111117000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
